<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>2025 Metrics Dashboard</title>

  <!-- âœ… Pico.css Framework -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css" />

  <!-- âœ… Fonts & Icon -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />

  <!-- âœ… Custom Styles -->
  <style>
    :root {
      --primary: #0b7fab;
      --secondary: #1e1e2f;
      --accent: #ff914d;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f5f7fa;
    }

    header {
      background: url('https://images.unsplash.com/photo-1602309282487-8701d76da938?auto=format&fit=crop&w=1600&q=80') center/cover no-repeat;
      color: white;
      padding: 4rem 1rem;
      text-align: center;
      border-bottom: 4px solid var(--accent);
    }

    header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin: 0;
      text-shadow: 1px 1px 2px #000;
    }

    nav {
      background-color: var(--secondary);
      color: white;
      padding: 0.75rem 1rem;
    }

    nav ul {
      margin: 0;
    }

    nav ul li a {
      color: white;
      font-weight: 500;
    }

    .tab-content {
      display: none;
      padding: 2rem 1rem;
      background-color: #fff;
      border-radius: 12px;
      margin-bottom: 2rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }

    .tab-content.active {
      display: block;
    }

    .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .tab {
      background-color: #eee;
      padding: 0.75rem 1.5rem;
      border-radius: 5px;
      cursor: pointer;
    }

    .tab.active {
      background-color: var(--accent);
      color: white;
    }

    .table-wrapper {
      overflow-x: auto;
      margin-top: 1rem;
    }

    table {
      width: 100%;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
      align-items: center;
    }

    .controls input,
    .controls select {
      min-width: 200px;
    }

    .chart-wrapper {
      display: grid;
      gap: 1.5rem;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      margin-top: 1rem;
    }

    iframe {
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      border: none;
      width: 100%;
      aspect-ratio: 16 / 9;
    }

    footer {
      text-align: center;
      margin-top: 4rem;
      padding: 2rem 1rem;
      background-color: var(--secondary);
      color: #ccc;
    }

    @media (max-width: 768px) {
      .controls {
        flex-direction: column;
      }
    }
  </style>

  <!-- âœ… Your JS & Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>

  <!-- âœ… HEADER -->
  <header>
    <h1>2025 Metrics Dashboard</h1>
  </header>

  <!-- âœ… NAVIGATION -->
  <nav class="container-fluid">
    <ul>
      <li><strong>Cooper Steel</strong></li>
    </ul>
    <ul>
      <li><a href="#" class="tab active" data-tab="incidents">ðŸ“‹ Incident Table</a></li>
      <li><a href="#" class="tab" data-tab="manHours">ðŸ‘· Man Hours</a></li>
      <li><a href="#" class="tab" data-tab="incidentRates">ðŸ“ˆ Incident Rates</a></li>
      <li><a href="#" class="tab" data-tab="summary">ðŸ“‘ Summary Tables</a></li>
      <li><a href="#" class="tab" data-tab="charts">ðŸ§© Data Comparison</a></li>
      <li><a href="#" class="tab" data-tab="disciplinary">ðŸ““ Disciplinary Log</a></li>
    </ul>
  </nav>

  <!-- âœ… MAIN CONTENT -->
  <main class="container">

    <!-- Controls: Global Export -->
    <div class="controls">
      <button id="exportAllTabs">ðŸ“š Export ALL Tabs (ZIP of CSVs)</button>
    </div>

    <!-- âœ… Incident Table -->
    <section id="incidents" class="tab-content active">
      <h3>Incident Table</h3>
      <div class="controls">
        <input id="incidentSearch" type="search" placeholder="Search incidentsâ€¦" />
        <select id="incidentClassification"><option value="">All Classifications</option></select>
        <select id="incidentOutcome"><option value="">All Outcomes</option></select>
        <select id="incidentJob"><option value="">All Job #</option></select>
        <button id="impactRefresh">ðŸ”„ Refresh</button>
        <button id="incidentExport">ðŸ“¥ Export CSV</button>
      </div>
      <div class="table-wrapper">
        <table id="incidentTable"><thead></thead><tbody></tbody></table>
      </div>
    </section>

    <!-- âœ… Man Hours -->
    <section id="manHours" class="tab-content">
      <h3>Man Hours</h3>
      <div class="controls">
        <button id="manHoursRefresh">ðŸ”„ Refresh Man Hours</button>
        <button id="manHoursExport">ðŸ“¥ Export CSV</button>
      </div>
      <div class="table-wrapper">
        <table id="manHoursTable"><thead></thead><tbody></tbody></table>
      </div>
    </section>

    <!-- âœ… Incident Rates -->
    <section id="incidentRates" class="tab-content">
      <h3>TRIR & LTIR</h3>
      <div class="controls">
        <button id="ratesRefresh">ðŸ”„ Refresh Rates</button>
        <button id="ratesExport">ðŸ“¥ Export CSV</button>
      </div>
      <div class="table-wrapper">
        <table id="ratesTable"><thead></thead><tbody></tbody></table>
      </div>
    </section>

    <!-- âœ… Summary Tables -->
    <section id="summary" class="tab-content">
      <h3>Summary Tables</h3>
      <div class="controls">
        <button id="summaryRefresh">ðŸ”„ Refresh Summary</button>
        <button id="summaryExport">ðŸ“¥ Export CSV</button>
      </div>
      <div id="summaryContainer"></div>
    </section>

    <!-- âœ… Charts Section -->
    <section id="charts" class="tab-content">
      <h3>Data Comparison</h3>
      <div class="chart-wrapper">
        <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQUvMV4tvUHnxdhRaAAmmdUpGIcNC4W4MAkbz1kOdXxtsE5813CGN-xiHyYdbmspRoRrWlCzeT6CIq2/pubchart?oid=2031563893&format=interactive"></iframe>
        <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQUvMV4tvUHnxdhRaAAmmdUpGIcNC4W4MAkbz1kOdXxtsE5813CGN-xiHyYdbmspRoRrWlCzeT6CIq2/pubchart?oid=529602498&format=interactive"></iframe>
        <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQUvMV4tvUHnxdhRaAAmmdUpGIcNC4W4MAkbz1kOdXxtsE5813CGN-xiHyYdbmspRoRrWlCzeT6CIq2/pubchart?oid=1216575399&format=interactive"></iframe>
        <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQUvMV4tvUHnxdhRaAAmmdUpGIcNC4W4MAkbz1kOdXxtsE5813CGN-xiHyYdbmspRoRrWlCzeT6CIq2/pubchart?oid=1357486766&format=interactive"></iframe>
        <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQUvMV4tvUHnxdhRaAAmmdUpGIcNC4W4MAkbz1kOdXxtsE5813CGN-xiHyYdbmspRoRrWlCzeT6CIq2/pubchart?oid=1892770215&format=interactive"></iframe>
      </div>
    </section>

    <!-- âœ… Disciplinary Log -->
    <section id="disciplinary" class="tab-content">
      <h3>Disciplinary Log</h3>
      <div class="controls">
        <button id="disciplinaryRefresh">ðŸ”„ Refresh Disciplinary Log</button>
        <button id="disciplinaryExport">ðŸ“¥ Export CSV</button>
      </div>
      <div class="table-wrapper">
        <table id="disciplinaryTable"><thead></thead><tbody></tbody></table>
      </div>
    </section>
  </main>

  <!-- âœ… FOOTER -->
  <footer>
    <small>Â© 2025 Cooper Steel. All rights reserved.</small>
  </footer>

  <!-- âœ… YOUR ORIGINAL SCRIPT (retain from your old code) -->
  <script>
    // Your original JavaScript functionality goes here, unchanged.
    // Attach tab switching logic:
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', e => {
        e.preventDefault();
        const target = tab.dataset.tab;
        document.querySelectorAll('.tab, .tab-content').forEach(el => el.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(target).classList.add('active');
      });
    });

    // Load all tabs on start:
    window.onload = () => {
      // You already wrote these:
      initIncidents();
      initManHours();
      initSummary();
      initRates();
      initDisciplinary();
    };
  </script>

</body>
</html>
